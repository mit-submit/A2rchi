<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Quickstart - A2rchi Docs</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Quickstart";
        var mkdocs_page_input_path = "quickstart.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> A2rchi Docs
        </a>
        <div class="version">
          1.1.0
        </div><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../overview/">A2rchi</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../install/">Install</a>
                </li>
              </ul>
              <ul class="current">
                <li class="toctree-l1 current"><a class="reference internal current" href="#">Quickstart</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#sources-and-services">Sources and Services</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#pipelines">Pipelines</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#configuration">Configuration</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#secrets">Secrets</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#creating-an-a2rchi-deployment">Creating an A2rchi Deployment</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#verifying-a-deployment">Verifying a deployment</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#removing-a-deployment">Removing a deployment</a>
    </li>
        </ul>
    </li>
    </ul>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../user_guide/">User Guide</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../advanced_setup_deploy/">Advanced Setup & Deployment</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../api_reference/">API Reference</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../developer_guide/">Developer Guide</a>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">A2rchi Docs</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">Quickstart</li>
    <li class="wy-breadcrumbs-aside">
          <a href="https://github.com/mit-submit/A2rchi/edit/master/docs/quickstart.md" class="icon icon-github"> Edit on GitHub</a>
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="quickstart">Quickstart</h1>
<p>Deploy your first instance of A2rchi and walk through the important concepts.</p>
<h2 id="sources-and-services">Sources and Services</h2>
<p>A2rchi can ingest data from a variety of <strong>sources</strong> and supports several <strong>services</strong>. List them with the CLI command, and decide which ones you want to use, so that we can configure them.</p>
<pre><code class="language-nohighlight">$ a2rchi list-services
Available A2RCHI services:

Application Services:
  chatbot              Interactive chat interface for users to communicate with the AI agent
  grafana              Monitoring dashboard for system and LLM performance metrics
  uploader             Admin interface for uploading and managing documents
  grader               Automated grading service for assignments with web interface

Integration Services:
  piazza               Integration service for Piazza posts and Slack notifications
  mattermost           Integration service for Mattermost channels
  redmine-mailer       Email processing and Cleo/Redmine ticket management

Data Sources:
  redmine              Redmine issue tracking integration
  jira                 Jira issue tracking integration
</code></pre>
<p>See the <a href="../user_guide/">User Guide</a> for detailed information about each service and source.</p>
<h2 id="pipelines">Pipelines</h2>
<p>A2rchi supports several pipelines, which are pre-defined sequences of operations that process user inputs and generate responses. A particular service will support a subset of the pipelines, see the <a href="../user_guide/">User Guide</a> for more details. </p>
<p>An example pipeline is the <code>QAPipeline</code>, which is a question-answering pipeline that takes a user's question, retrieves relevant documents from the vector store, and generates an answer using a language model.</p>
<p>We will specify which pipelines we are interested in making available to A2rchi in the configuration file.</p>
<h2 id="configuration">Configuration</h2>
<p>Once you have chosen the services, sources, and pipelines you want to use, you can create a configuration file which specifies these and their settings.
You can start from one of the example configuration files in <code>configs/</code>, or create your own from scratch.
The services and sources that A2rchi will use are not determined here, only their parameters are being set.</p>
<blockquote>
<p><strong>Important:</strong><br />
The configuration file follows the format of <code>a2rchi/templates/base-config.yaml</code>, and any fields not specified in your configuration file will be filled in with the defaults from this base config.</p>
</blockquote>
<p>Here is an example configuration file which configures some specific settings for the <code>chatbot</code> service using the <code>QAPipeline</code> pipeline with a local <code>VLLM</code> model. Save it as <code>configs/my_config.yaml</code>:</p>
<pre><code class="language-yaml">name: my_a2rchi

global:
  TRAINED_ON: &quot;My data&quot;  

data_manager:
  input_lists:  
    - configs/miscellanea.list
  embedding_name: HuggingFaceEmbeddings
  chromadb_host: localhost

a2rchi:
  pipelines:
    - QAPipeline
  pipeline_map:
    QAPipeline:
      prompts:
        required:
          condense_prompt: configs/prompts/condense.prompt  
          chat_prompt: configs/prompts/submit.prompt  
      models:
        required:
          chat_model: VLLM
          condense_model: VLLM
  model_class_map:
    VLLM:
      kwargs:
        base_model: deepseek-ai/DeepSeek-R1-Distill-Qwen-1.5B

interfaces:
  chat_app:
    HOSTNAME: &quot;&lt;your-hostname&gt;&quot; 
</code></pre>
<details>
<summary>Explanation of config parameters</summary>
<br>
Here is a brief explanation of the parameters in the example configuration file:

<ul>
  <li><code>name</code>: The name of your A2rchi deployment.</li>
  <li><code>global:TRAINED_ON</code>: A brief description of the documents you are uploading to A2rchi.</li>
  <li><code>data_manager</code>: Settings related to data management, including:
    <ul>
      <li><code>input_lists</code>: A list of files containing links to be ingested.</li>
      <li><code>embedding_name</code>: The embedding model to use for vectorization.</li>
      <li><code>chromadb_host</code>: The host where ChromaDB is running.</li>
    </ul>
  </li>
  <li><code>a2rchi</code>: Settings related to the A2rchi core, including:
    <ul>
      <li><code>pipelines</code>: The pipelines to use (e.g., <code>QAPipeline</code>).</li>
      <li><code>pipeline_map</code>: Configuration for each pipeline, including prompts and models.</li>
      <li><code>model_class_map</code>: Mapping of model names to their classes and parameters.</li>
    </ul>
  </li>
  <li><code>interfaces</code>: Settings for the services/interfaces, including:
    <ul>
      <li><code>chat_app</code>: Configuration for the chat application, including the hostname.</li>
    </ul>
  </li>
</ul>
</details>
<p><br></p>
<h2 id="secrets">Secrets</h2>
<p>Secrets are values which are sensitive and therefore should not be directly included in code or configuration files. They typically include passwords, API keys, etc.</p>
<p>To manage these secrets, we ask that you write them to a location on your file system in  a single <code>.env</code> file.</p>
<p>The only secret that is required to launch a minimal version of A2rchi (chatbot with open source LLM and embeddings) is:</p>
<ul>
<li><code>PG_PASSWORD</code>: some password you pick which encrypts the database.</li>
</ul>
<p>So for a basic deployment, all you need is to create the 'secrets' file is:</p>
<pre><code class="language-bash">echo &quot;PG_PASSWORD=my_strong_password&quot; &gt; ~/.secrets.env
</code></pre>
<p>If you are not running an open source model, you can use various OpenAI or Anthropic models if you provide the following secrets,</p>
<ul>
<li><code>openai_api_key</code>: the API key given by OpenAI</li>
<li><code>anthropic_api_key</code>: the API key given by Anthropic</li>
</ul>
<p>respectively. If you want to access private embedding models or LLMs from HuggingFace, you will need to provide the following:</p>
<ul>
<li><code>hf_token</code>: the API key to your HuggingFace account</li>
</ul>
<p>For many of the other services provided by A2rchi, additional secrets are required. These are detailed in User's Guide</p>
<h2 id="creating-an-a2rchi-deployment">Creating an A2rchi Deployment</h2>
<p>Create your deployment with the CLI:</p>
<pre><code class="language-bash">a2rchi create --name my-a2rchi --config configs/my_config.yaml --podman -e .secrets.env  --services chatbot
</code></pre>
<p>Here we specify:</p>
<ul>
<li><code>--name</code>: the name of your deployment</li>
<li><code>--config</code>: the path to your configuration file</li>
<li><code>--podman</code>: use <code>podman</code> for container management (<code>docker</code> is default)</li>
<li><code>-e</code>: the path to your secrets</li>
<li><code>--services</code>: the services to deploy (here we only deploy the <code>chatbot</code> service)</li>
</ul>
<details>
<summary> Output Example</summary>


<pre><code class="language-bash">$ a2rchi create --name my-a2rchi -c test.yaml --podman -e secrets.env  --services chatbot
</code></pre>


<pre><code class="language-nohighlight">Starting A2RCHI deployment process...
[a2rchi] Creating deployment 'my-a2rchi' with services: chatbot
[a2rchi] Auto-enabling dependencies: postgres, chromadb
[a2rchi] Configuration validated successfully
[a2rchi] You are using an embedding model from HuggingFace; make sure to include a HuggingFace token if required for usage, it won't be explicitly enforced
[a2rchi] Required secrets validated: PG_PASSWORD
[a2rchi] Volume 'a2rchi-pg-my-a2rchi' already exists. No action needed.
[a2rchi] Volume 'a2rchi-my-a2rchi' already exists. No action needed.
[a2rchi] Starting compose deployment from /path/to/my/.a2rchi/a2rchi-my-a2rchi
[a2rchi] Using compose file: /path/to/my/.a2rchi/a2rchi-my-a2rchi/compose.yaml
[a2rchi] (This might take a minute...)
[a2rchi] Deployment started successfully
A2RCHI deployment 'my-a2rchi' created successfully!
Services running: chatbot, postgres, chromadb
[a2rchi] Chatbot: http://localhost:7861
</code></pre>


</details>
<p><br></p>
<p>The first time you run this command it will take longer than usual (order minutes) because <code>docker</code>/<code>podman</code> will have to build the container images from scratch; subsequent deployments which will re-use the images will be quicker (around a minute).</p>
<blockquote>
<p>Note: having issues? Run the command with the <code>-v 4</code> flag to enable <code>DEBUG</code> level logging.</p>
</blockquote>
<h3 id="verifying-a-deployment">Verifying a deployment</h3>
<p>Check that a deployment is running with the A2rchi CLI:</p>
<pre><code class="language-bash">a2rchi list-deployments
</code></pre>
<p>You should see something like:</p>
<pre><code class="language-console">Existing deployments:
  my-a2rchi
</code></pre>
<p>You can also verify that all your images are up and running properly in containers by executing the command:</p>
<pre><code class="language-bash">podman ps
</code></pre>
<p>You should see something like:</p>
<pre><code class="language-console">CONTAINER ID  IMAGE                              COMMAND               CREATED             STATUS                       PORTS                   NAMES
7e823e15e8d8  localhost/chromadb-my-a2rchi:2000  uvicorn chromadb....  About a minute ago  Up About a minute (healthy)  0.0.0.0:8010-&gt;8000/tcp  chromadb-my-a2rchi
8d561db18278  docker.io/library/postgres:16      postgres              About a minute ago  Up About a minute (healthy)  5432/tcp                postgres-my-a2rchi
a1f7f9b44b1d  localhost/chat-my-a2rchi:2000      python -u a2rchi/...  About a minute ago  Up About a minute            0.0.0.0:7868-&gt;7868/tcp  chat-my-a2rchi
</code></pre>
<p>To access the chat interface, visit its corresponding port (<code>0.0.0.0:7868</code> in the above example).</p>
<h3 id="removing-a-deployment">Removing a deployment</h3>
<p>Lastly, to tear down the deployment, simply run:</p>
<pre><code class="language-bash">a2rchi delete --name my-a2rchi
</code></pre>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../install/" class="btn btn-neutral float-left" title="Install"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../user_guide/" class="btn btn-neutral float-right" title="User Guide">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/mit-submit/A2rchi" class="fa fa-github" style="color: #fcfcfc"> GitHub</a>
        </span>
    
    
      <span><a href="../install/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../user_guide/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
