<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Quickstart - A2RCHI Docs</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Quickstart";
        var mkdocs_page_input_path = "quickstart.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> A2RCHI Docs
        </a>
        <div class="version">
          1.2.4
        </div><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">A2RCHI</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../install/">Install</a>
                </li>
              </ul>
              <ul class="current">
                <li class="toctree-l1 current"><a class="reference internal current" href="#">Quickstart</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#sources-and-services">Sources and Services</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#pipelines">Pipelines</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#configuration">Configuration</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#secrets">Secrets</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#creating-an-a2rchi-deployment">Creating an A2RCHI Deployment</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#a-note-about-multiple-configurations">A note about multiple configurations</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#verifying-a-deployment">Verifying a deployment</a>
    </li>
        </ul>
    </li>
    </ul>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../user_guide/">User Guide</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../advanced_setup_deploy/">Advanced Setup and Deployment</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../api_reference/">API Reference</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../developer_guide/">Developer Guide</a>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">A2RCHI Docs</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">Quickstart</li>
    <li class="wy-breadcrumbs-aside">
          <a href="https://github.com/mit-submit/A2rchi/edit/master/docs/quickstart.md" class="icon icon-github"> Edit on GitHub</a>
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="quickstart">Quickstart</h1>
<p>Deploy your first instance of A2RCHI and walk through the important concepts.</p>
<h2 id="sources-and-services">Sources and Services</h2>
<p>A2RCHI can ingest data from a variety of <strong>sources</strong> and supports several <strong>services</strong>. List them with the CLI command below and decide which ones you want to use so that we can configure them.</p>
<pre><code class="language-bash">a2rchi list-services
</code></pre>
<p>Example output:</p>
<pre><code>Available A2RCHI services:

Application Services:
  chatbot              Interactive chat interface for users to communicate with the AI agent
  grafana              Monitoring dashboard for system and LLM performance metrics
  uploader             Admin interface for uploading and managing documents
  grader               Automated grading service for assignments with web interface

Integration Services:
  piazza               Integration service for Piazza posts and Slack notifications
  mattermost           Integration service for Mattermost channels
  redmine-mailer       Email processing and Cleo/Redmine ticket management

Data Sources:
  git                 Git repository scraping for MkDocs-based documentation
  jira                Jira issue tracking integration
  redmine             Redmine ticket integration
  sso                 SSO-backed web crawling
</code></pre>
<p>See the <a href="../user_guide/">User Guide</a> for detailed information about each service and source.</p>
<h2 id="pipelines">Pipelines</h2>
<p>A2RCHI supports several pipelinesâ€”pre-defined sequences of operations that process user inputs and generate responses. Each service supports a subset of pipelines (see the <a href="../user_guide/">User Guide</a> for details).</p>
<p>An example pipeline is <code>QAPipeline</code>, a question-answering pipeline that takes a user's question, retrieves relevant documents from the vector store, and generates an answer using a language model.</p>
<p>You specify which pipelines should be available in the configuration file.</p>
<h2 id="configuration">Configuration</h2>
<p>Once you have chosen the services, sources, and pipelines you want to use, create a configuration file that specifies their settings. You can start from one of the example configuration files under <code>examples/deployments/</code>, or create your own from scratch. This file sets parameters; the selected services and sources are determined at deployment time.</p>
<blockquote>
<p><strong>Important:</strong> The configuration file follows the format of <code>src/cli/templates/base-config.yaml</code>. Any fields not specified in your configuration will be populated with the defaults from this template.</p>
</blockquote>
<p>Example configuration (<code>examples/deployments/basic-gpu/config.yaml</code>) for the <code>chatbot</code> service using <code>QAPipeline</code> with a local VLLM model:</p>
<pre><code class="language-yaml">name: my_a2rchi

data_manager:
  sources:
    links:
      visible: true          # include scraped pages in the chat citations
      input_lists:
        - examples/deployments/basic-gpu/miscellanea.list
  embedding_name: HuggingFaceEmbeddings
  chunk_size: 1000

a2rchi:
  pipelines:
    - QAPipeline
  pipeline_map:
    QAPipeline:
      prompts:
        required:
          condense_prompt: examples/deployments/basic-gpu/condense.prompt
          chat_prompt: examples/deployments/basic-gpu/qa.prompt
      models:
        required:
          chat_model: VLLM
          condense_model: VLLM
  model_class_map:
    VLLM:
      kwargs:
        base_model: 'Qwen/Qwen2.5-7B-Instruct-1M'
        quantization: True
        max_model_len: 32768
        tensor_parallel_size: 2
        repetition_penalty: 1.0
        gpu_memory_utilization: 0.5

services:
  chat_app:
    trained_on: &quot;My data&quot;
    hostname: &quot;&lt;your-hostname&gt;&quot;
  chromadb:
    chromadb_host: localhost
</code></pre>
<details>
<summary>Explanation of configuration parameters</summary>

- `name`: Name of your A2RCHI deployment.
- `data_manager`: Settings related to data ingestion and the vector store.
  - `sources.links.input_lists`: Lists of URLs to seed the deployment.
  - `sources.<name>.visible`: Controls whether content from a given source should be surfaced to end users (defaults to `true`).
  - `embedding_name`: Embedding model used for vectorization.
  - `chunk_size`: Controls how documents are split prior to embedding.
- `a2rchi`: Core pipeline settings.
  - `pipelines`: Pipelines to use (e.g., `QAPipeline`).
  - `pipeline_map`: Configuration for each pipeline, including prompts and models.
  - `model_class_map`: Mapping of model names to their classes and parameters.
- `services`: Settings for individual services/interfaces.
  - `chat_app`: Chat interface configuration, including hostname and descriptive metadata.
  - `chromadb`: Connection details for the vector store container.

</details>

<h2 id="secrets">Secrets</h2>
<p>Secrets are sensitive values (passwords, API keys, etc.) that should not be stored directly in code or configuration files. Store them in a single <code>.env</code> file on your filesystem.</p>
<p>Minimal deployments (chatbot with open-source LLM and embeddings) require:</p>
<ul>
<li><code>PG_PASSWORD</code>: password used to secure the database.</li>
</ul>
<p>Create the secrets file with:</p>
<pre><code class="language-bash">echo &quot;PG_PASSWORD=my_strong_password&quot; &gt; ~/.secrets.env
</code></pre>
<p>If you are not using open-source models, supply the relevant API credentials:</p>
<ul>
<li><code>OPENAI_API_KEY</code>: OpenAI API key.</li>
<li><code>ANTHROPIC_API_KEY</code>: Anthropic API key.</li>
<li><code>HUGGINGFACEHUB_API_TOKEN</code>: HuggingFace access token (for private models or embeddings).</li>
</ul>
<p>Other services may require additional secrets; see the <a href="../user_guide/">User Guide</a> for details.</p>
<h2 id="creating-an-a2rchi-deployment">Creating an A2RCHI Deployment</h2>
<p>Create your deployment with the CLI:</p>
<pre><code class="language-bash">a2rchi create --name my-a2rchi --config examples/deployments/basic-gpu/config.yaml --podman --env-file .secrets.env --services chatbot --gpu-ids all
</code></pre>
<p>This command specifies:</p>
<ul>
<li><code>--name</code>: Deployment name.</li>
<li><code>--config</code>: Path to the configuration file.</li>
<li><code>--podman</code>: Use Podman for container management (<code>docker</code> is the default).</li>
<li><code>--env-file</code>: Path to the secrets file.</li>
<li><code>--services</code>: Services to deploy (only the <code>chatbot</code> service in this example but others can be included separated by commas).</li>
</ul>
<p>Note that this command will create a deployment using only the link sources specified in the <code>data_manager.sources.links.input_lists</code> by default, if other sources (such as git-based documentation or pages under sso) want to be included they must be included using the <code>--sources</code> flag and in the configuration file.</p>
<details>
<summary>Example output</summary>


<pre><code class="language-bash">a2rchi create --name my-a2rchi --config examples/deployments/basic-gpu/config.yaml --podman --env-file .secrets.env --services chatbot --gpu-ids all
</code></pre>



<pre><code>Starting A2RCHI deployment process...
[a2rchi] Creating deployment 'my-a2rchi' with services: chatbot
[a2rchi] Auto-enabling dependencies: postgres, chromadb
[a2rchi] Configuration validated successfully
[a2rchi] You are using an embedding model from HuggingFace; make sure to include a HuggingFace token if required for usage, it won't be explicitly enforced
[a2rchi] Required secrets validated: PG_PASSWORD
[a2rchi] Volume 'a2rchi-pg-my-a2rchi' already exists. No action needed.
[a2rchi] Volume 'a2rchi-my-a2rchi' already exists. No action needed.
[a2rchi] Starting compose deployment from /path/to/my/.a2rchi/a2rchi-my-a2rchi
[a2rchi] Using compose file: /path/to/my/.a2rchi/a2rchi-my-a2rchi/compose.yaml
[a2rchi] (This might take a minute...)
[a2rchi] Deployment started successfully
A2RCHI deployment 'my-a2rchi' created successfully!
Services running: chatbot, postgres, chromadb
[a2rchi] Chatbot: http://localhost:7861
</code></pre>


</details>

<p>The first deployment builds the container images from scratch (which may take a few minutes). Subsequent deployments reuse the images and complete much faster (roughly a minute).</p>
<blockquote>
<p><strong>Tip:</strong> Having issues? Run the command with <code>-v 4</code> to enable DEBUG-level logging.</p>
</blockquote>
<h3 id="a-note-about-multiple-configurations">A note about multiple configurations</h3>
<p>When multiple configuration files are passed, their <code>services</code> sections must remain consistent, otherwise the deployment fails. The current use cases for multiple configurations include swapping pipelines/prompts dynamically via the chat app and maintaining separate benchmarking configurations.</p>
<h3 id="verifying-a-deployment">Verifying a deployment</h3>
<p>List running deployments with:</p>
<pre><code class="language-bash">a2rchi list-deployments
</code></pre>
<p>You should see output similar to:</p>
<pre><code class="language-text">Existing deployments:
</code></pre>
<p>(Additional details will follow for each deployment.)</p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../install/" class="btn btn-neutral float-left" title="Install"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../user_guide/" class="btn btn-neutral float-right" title="User Guide">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/mit-submit/A2rchi" class="fa fa-github" style="color: #fcfcfc"> GitHub</a>
        </span>
    
    
      <span><a href="../install/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../user_guide/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
